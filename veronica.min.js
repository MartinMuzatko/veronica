!function(a,b){"use strict";function c(a){var b=T(0),c=a.trim().slice(b.length).match(/^\s*(\S+?)\s*(?:,\s*(\S+))?\s+in\s+(.+)$/);return c?{key:c[1],pos:c[2],val:b+c[3]}:{val:a}}function d(a,b,c){var d={};return d[a.key]=b,a.pos&&(d[a.pos]=c),d}function e(a,b,e){n(a,"each");var f,g=r(a),i=a.outerHTML,j=!!X[g],k=X[g]||{tmpl:i},l=a.parentNode,m=document.createComment("riot placeholder"),p=[],q=o(a);l.insertBefore(m,a),e=c(e),b.one("premount",function(){l.stub&&(l=b.root),a.parentNode.removeChild(a)}).on("update",function(){var c=U(e.val,b);R(c)||(f=c?JSON.stringify(c):"",c=c?Object.keys(c).map(function(a){return d(e,a,c[a])}):[]);for(var i=document.createDocumentFragment(),n=p.length,o=c.length;n>o;)p[--n].unmount(),p.splice(n,1);for(n=0;o>n;++n){var r=!f&&e.key?d(e,c[n],n):c[n];p[n]?p[n].update(r):((p[n]=new h(k,{parent:b,isLoop:!0,hasImpl:j,root:O.test(g)?l:a.cloneNode(),item:r},a.innerHTML)).mount(),i.appendChild(p[n].root)),p[n]._item=r}l.insertBefore(i,m),q&&(b.tags[g]=p)}).one("updated",function(){var a=Object.keys(b);u(l,function(c){1!=c.nodeType||c.isLoop||c._looped||(c._visited=!1,c._looped=!0,C(c,b,a))})})}function f(a,b,c){u(a,function(a){if(1==a.nodeType){a.isLoop=a.isLoop||a.parentNode&&a.parentNode.isLoop||a.getAttribute("each")?1:0;var d=o(a);d&&!a.isLoop&&c.push(p(d,a,b)),a.isLoop||C(a,b,[])}})}function g(a,b,c){function d(a,b,d){if(b.indexOf(T(0))>=0){var e={dom:a,expr:b};c.push(s(e,d))}}u(a,function(a){var c=a.nodeType;if(3==c&&"STYLE"!=a.parentNode.tagName&&d(a,a.nodeValue),1==c){var f=a.getAttribute("each");return f?(e(a,b,f),!1):(l(a.attributes,function(b){var c=b.name,e=c.split("__")[1];return d(a,b.value,{attr:e||c,bool:e}),e?(n(a,c),!1):void 0}),o(a)?!1:void 0)}})}function h(a,c,d){function e(){var a=x&&u?n:r||n;l(D.attributes,function(b){o[b.name]=U(b.value,a)}),l(Object.keys(I),function(b){o[b]=U(I[b],a)})}function h(a){for(var b in z)typeof n[b]!==M&&(n[b]=a[b])}function i(){n.parent&&u&&l(Object.keys(n.parent),function(a){var b=!~P.indexOf(a)&&~J.indexOf(a);(typeof n[a]===M||b)&&(b||J.push(a),n[a]=n.parent[a])})}function j(a){if(l(C,function(b){b[a?"mount":"unmount"]()}),r){var b=a?"on":"off";u?r[b]("unmount",n.unmount):r[b]("update",n.update)[b]("unmount",n.unmount)}}var n=G.observable(this),o=B(c.opts)||{},p=V(a.tmpl),r=c.parent,u=c.isLoop,x=c.hasImpl,z=t(c.item),A=[],C=[],D=c.root,E=a.fn,F=D.tagName.toLowerCase(),I={},J=[];E&&D._tag&&D._tag.unmount(!0),this.isMounted=!1,D.isLoop=u,D._tag=this,this._id=H++,s(this,{parent:r,root:D,opts:o,tags:{}},z),l(D.attributes,function(a){var b=a.value;T(/{.*}/).test(b)&&(I[a.name]=b)}),p.innerHTML&&!/^(select|optgroup|table|tbody|tr|col(?:group)?)$/.test(F)&&(p.innerHTML=y(p.innerHTML,d)),this.update=function(a){a=t(a),i(),a&&typeof z===L&&(h(a),z=a),s(n,a),e(),n.trigger("update",a),k(A,n),n.trigger("updated")},this.mixin=function(){l(arguments,function(a){a=typeof a===K?G.mixin(a):a,l(Object.keys(a),function(b){"init"!=b&&(n[b]=m(a[b])?a[b].bind(n):a[b])}),a.init&&a.init.bind(n)()})},this.mount=function(){if(e(),E&&E.call(n,o),g(p,n,A),j(!0),(a.attrs||x)&&(v(a.attrs,function(a,b){D.setAttribute(a,b)}),g(n.root,n,A)),(!n.parent||u)&&n.update(z),n.trigger("premount"),u&&!x)n.root=D=p.firstChild;else{for(;p.firstChild;)D.appendChild(p.firstChild);D.stub&&(n.root=D=r.root)}!n.parent||n.parent.isMounted?(n.isMounted=!0,n.trigger("mount")):n.parent.one("mount",function(){w(n.root)||(n.parent.isMounted=n.isMounted=!0,n.trigger("mount"))})},this.unmount=function(a){var c,d=D,e=d.parentNode;if(e){if(r)c=q(r),R(c.tags[F])?l(c.tags[F],function(a,b){a._id==n._id&&c.tags[F].splice(b,1)}):c.tags[F]=b;else for(;d.firstChild;)d.removeChild(d.firstChild);a?e.removeAttribute("riot-tag"):e.removeChild(d)}n.trigger("unmount"),j(),n.off("*"),D._tag=null},f(p,this,C)}function i(b,c,d,e){d[b]=function(b){var f,g=e._item,h=e.parent;if(!g)for(;h&&!g;)g=h._item,h=h.parent;b=b||a.event;try{b.currentTarget=d,b.target||(b.target=b.srcElement),b.which||(b.which=b.charCode||b.keyCode)}catch(i){}b.item=g,c.call(e,b)===!0||/radio|check/.test(d.type)||(b.preventDefault&&b.preventDefault(),b.returnValue=!1),b.preventUpdate||(f=g?q(h):e,f.update())}}function j(a,b,c){a&&(a.insertBefore(c,b),a.removeChild(b))}function k(a,b){l(a,function(a,c){var d=a.dom,e=a.attr,f=U(a.expr,b),g=a.dom.parentNode;if(a.bool?f=f?e:!1:null==f&&(f=""),g&&"TEXTAREA"==g.tagName&&(f=(""+f).replace(/riot-/g,"")),a.value!==f){if(a.value=f,!e)return void(d.nodeValue=""+f);if(n(d,e),m(f))i(e,f,d,b);else if("if"==e){var h=a.stub,k=function(){j(h.parentNode,h,d)},l=function(){j(d.parentNode,d,h)};f?h&&(k(),d.inStub=!1,w(d)||u(d,function(a){a._tag&&!a._tag.isMounted&&(a._tag.isMounted=!!a._tag.trigger("mount"))})):(h=a.stub=h||document.createTextNode(""),d.parentNode?l():(b.parent||b).one("updated",l),d.inStub=!0)}else if(/^(show|hide)$/.test(e))"hide"==e&&(f=!f),d.style.display=f?"":"none";else if("value"==e)d.value=f;else if(D(e,I)&&e!=J)f&&d.setAttribute(e.slice(I.length),f);else{if(a.bool&&(d[e]=f,!f))return;typeof f!==L&&d.setAttribute(e,f)}}})}function l(a,b){for(var c,d=0,e=(a||[]).length;e>d;d++)c=a[d],null!=c&&b(c,d)===!1&&d--;return a}function m(a){return typeof a===N||!1}function n(a,b){a.removeAttribute(b)}function o(a){return a.tagName&&X[a.getAttribute(J)||a.tagName.toLowerCase()]}function p(a,b,c){var d,e=new h(a,{root:b,parent:c},b.innerHTML),f=r(b),g=q(c);return e.parent=g,d=g.tags[f],d?(R(d)||(g.tags[f]=[d]),~g.tags[f].indexOf(e)||g.tags[f].push(e)):g.tags[f]=e,b.innerHTML="",e}function q(a){for(var b=a;!o(b.root)&&b.parent;)b=b.parent;return b}function r(a){var b=o(a),c=a.getAttribute("name"),d=c&&c.indexOf(T(0))<0?c:b?b.name:a.tagName.toLowerCase();return d}function s(a){for(var b,c=arguments,d=1;d<c.length;++d)if(b=c[d])for(var e in b)a[e]=b[e];return a}function t(a){if(!(a instanceof h||a&&typeof a.trigger==N))return a;var b={};for(var c in a)~P.indexOf(c)||(b[c]=a[c]);return b}function u(a,b){if(a){if(b(a)===!1)return;for(a=a.firstChild;a;)u(a,b),a=a.nextSibling}}function v(a,b){for(var c,d=/([-\w]+) ?= ?(?:"([^"]*)|'([^']*)|({[^}]*}))/g;c=d.exec(a);)b(c[1].toLowerCase(),c[2]||c[3]||c[4])}function w(a){for(;a;){if(a.inStub)return!0;a=a.parentNode}return!1}function x(a){return document.createElement(a)}function y(a,b){return a.replace(/<(yield)\/?>(<\/\1>)?/gi,b||"")}function z(a,b){return(b||document).querySelectorAll(a)}function A(a,b){return(b||document).querySelector(a)}function B(a){function b(){}return b.prototype=a,new b}function C(a,b,c){if(!a._visited){var d,e=a.getAttribute("id")||a.getAttribute("name");e&&(c.indexOf(e)<0&&(d=b[e],d?R(d)?d.push(a):b[e]=[d,a]:b[e]=a),a._visited=!0)}}function D(a,b){return a.slice(0,b.length)===b}function E(a){if(!G.render){S||(S=x("style"),S.setAttribute("type","text/css"));var b=document.head||document.getElementsByTagName("head")[0];if(S.styleSheet?S.styleSheet.cssText+=a:S.innerHTML+=a,!S._rendered)if(S.styleSheet)document.body.appendChild(S);else{var c=A("style[type=riot]");c?(c.parentNode.insertBefore(S,c),c.parentNode.removeChild(c)):b.appendChild(S)}S._rendered=!0}}function F(a,b,c){var d=X[b],e=a._innerHTML=a._innerHTML||a.innerHTML;return a.innerHTML="",d&&a&&(d=new h(d,{root:a,opts:c},e)),d&&d.mount?(d.mount(),W.push(d),d.on("unmount",function(){W.splice(W.indexOf(d),1)})):void 0}var G={version:"v2.2.4",settings:{}},H=0,I="riot-",J=I+"tag",K="string",L="object",M="undefined",N="function",O=/^(?:opt(ion|group)|tbody|col|t[rhd])$/,P=["_item","_id","update","root","mount","unmount","mixin","isMounted","isLoop","tags","parent","opts","trigger","on","off","one"],Q=0|(a&&a.document||{}).documentMode,R=Array.isArray;G.observable=function(a){a=a||{};var b={},c=0;return a.on=function(d,e){return m(e)&&(typeof e.id===M&&(e._id=c++),d.replace(/\S+/g,function(a,c){(b[a]=b[a]||[]).push(e),e.typed=c>0})),a},a.off=function(c,d){return"*"==c?b={}:c.replace(/\S+/g,function(a){if(d)for(var c,e=b[a],f=0;c=e&&e[f];++f)c._id==d._id&&e.splice(f--,1);else b[a]=[]}),a},a.one=function(b,c){function d(){a.off(b,d),c.apply(a,arguments)}return a.on(b,d)},a.trigger=function(c){for(var d,e=[].slice.call(arguments,1),f=b[c]||[],g=0;d=f[g];++g)d.busy||(d.busy=1,d.apply(a,d.typed?[c].concat(e):e),f[g]!==d&&g--,d.busy=0);return b.all&&"all"!=c&&a.trigger.apply(a,["all",c].concat(e)),a},a},G.mixin=function(){var a={};return function(b,c){return c?void(a[b]=c):a[b]}}(),function(a,b,c){function d(){return h.href.split("#")[1]||""}function e(a){return a.split("/")}function f(a){a.type&&(a=d()),a!=g&&(i.trigger.apply(null,["H"].concat(e(a))),g=a)}if(c){var g,h=c.location,i=a.observable(),j=!1,k=a.route=function(a){a[0]?(h.hash=a,f(a)):i.on("H",a)};k.exec=function(a){a.apply(null,e(d()))},k.parser=function(a){e=a},k.stop=function(){j&&(c.removeEventListener?c.removeEventListener(b,f,!1):c.detachEvent("on"+b,f),i.off("*"),j=!1)},k.start=function(){j||(c.addEventListener?c.addEventListener(b,f,!1):c.attachEvent("on"+b,f),j=!0)},k.start()}}(G,"hashchange",a);var S,T=function(a){var b,c,d,e=/[{}]/g;return function(f){var g=G.settings.brackets||a;return b!==g&&(b=g,d=g.split(" "),c=d.map(function(a){return a.replace(/(?=.)/g,"\\")})),f instanceof RegExp?g===a?f:new RegExp(f.source.replace(e,function(a){return c[~~("}"===a)]}),f.global?"g":""):d[f]}}("{ }"),U=function(){function b(a,b){return a.indexOf(T(0))<0?(a=a.replace(/\n|\r\n?/g,"\n"),function(){return a}):(a=a.replace(T(/\\{/g),"￰").replace(T(/\\}/g),"￱"),b=e(a,f(a,T(/{/),T(/}/))),a=2!==b.length||b[0]?"["+b.map(function(a,b){return b%2?c(a,!0):'"'+a.replace(/\n|\r\n?/g,"\\n").replace(/"/g,'\\"')+'"'}).join(",")+'].join("")':c(b[1]),new Function("d","return "+a.replace(/\uFFF0/g,T(0)).replace(/\uFFF1/g,T(1))+";"))}function c(a,b){return a=a.replace(/\n|\r\n?/g," ").replace(T(/^[{ ]+|[ }]+$|\/\*.+?\*\//g),""),/^\s*[\w- "']+ *:/.test(a)?"["+f(a,/["' ]*[\w- ]+["' ]*:/,/,(?=["' ]*[\w- ]+["' ]*:)|}|$/).map(function(a){return a.replace(/^[ "']*(.+?)[ "']*: *(.+?),? *$/,function(a,b,c){return c.replace(/[^&|=!><]+/g,d)+'?"'+b+'":"",'})}).join("")+'].join(" ").trim()':d(a,b)}function d(a,b){return a=a.trim(),a?"(function(v){try{v="+a.replace(i,function(a,b,c){return c?'(("'+c+h+c+")":a})+"}catch(e){}return "+(b===!0?'!v&&v!==0?"":v':"v")+"}).call(d)":""}function e(a,b){var c=[];return b.map(function(b,d){d=a.indexOf(b),c.push(a.slice(0,d),b),a=a.slice(d+b.length)}),a&&c.push(a),c}function f(a,b,c){var d,e=0,f=[],g=new RegExp("("+b.source+")|("+c.source+")","g");return a.replace(g,function(b,c,g,h){!e&&c&&(d=h),e+=c?1:-1,e||null==g||f.push(a.slice(d,h+g.length))}),f}var g={},h='"in d?d:'+(a?"window).":"global)."),i=/(['"\/])(?:[^\\]*?|\\.|.)*?\1|\.\w*|\w*:|\b(?:(?:new|typeof|in|instanceof) |(?:this|true|false|null|undefined)\b|function\s*\()|([A-Za-z_$]\w*)/g;return function(a,c){return a&&(g[a]||(g[a]=b(a)))(c)}}(),V=function(a){function b(b){var f=b&&b.match(/^\s*<([-\w]+)/),g=f&&f[1].toLowerCase(),h=d[g]||e,i=x(h);return i.stub=!0,a&&g&&(f=g.match(O))?c(i,b,g,!!f[1]):i.innerHTML=b,i}function c(a,b,c,d){var f,g=x(e),h=d?"select>":"table>";g.innerHTML="<"+h+b+"</"+h,f=g.getElementsByTagName(c)[0],f&&a.appendChild(f)}var d={tr:"tbody",th:"tr",td:"tr",tbody:"table",col:"colgroup"},e="div";return a=a&&10>a,b}(Q),W=[],X={};G.tag=function(a,b,c,d,e){return m(d)&&(e=d,/^[\w\-]+\s?=/.test(c)?(d=c,c=""):d=""),c&&(m(c)?e=c:E(c)),X[a]={name:a,tmpl:b,attrs:d,fn:e},a},G.mount=function(a,b,c){function d(a){var b="";return l(a,function(a){b+=", *["+J+'="'+a.trim()+'"]'}),b}function e(){var a=Object.keys(X);return a+d(a)}function f(a){var d;if(a.tagName){!b||(d=a.getAttribute(J))&&d==b||a.setAttribute(J,b);var e=F(a,b||a.getAttribute(J)||a.tagName.toLowerCase(),c);e&&i.push(e)}else a.length&&l(a,f)}var g,h,i=[];if(typeof b===L&&(c=b,b=0),typeof a===K?("*"===a?a=h=e():a+=d(a.split(",")),g=z(a)):g=a,"*"===b){if(b=h||e(),g.tagName)g=z(b,g);else{var j=[];l(g,function(a){j.push(z(b,a))}),g=j}b=0}return g.tagName?f(g):l(g,f),i},G.update=function(){return l(W,function(a){a.update()})},G.mountTo=G.mount,G.util={brackets:T,tmpl:U},typeof exports===L?module.exports=G:"function"==typeof define&&define.amd?define(function(){return a.riot=G}):a.riot=G}("undefined"!=typeof window?window:void 0),function(a,b){"use strict";var c={version:"v0.0.5",settings:{viewTag:".app-body",maxPageTransitionTime:500}},d={flux:{}},e=["UCBrowser","Opera Mini"],f={BROWSER_SUPPORT:"A"};!function(a){function b(){var a=!1,b="animation",c="",d="Webkit Moz O ms Khtml".split(" "),e="",f=$("body")[0];if(void 0!==f.style.animationName&&(a=!0),a===!1)for(var g=0;g<d.length;g++)if(void 0!==f.style[d[g]+"AnimationName"]){e=d[g],b=e+"Animation",c="-"+e.toLowerCase()+"-",a=!0;break}return a}function d(){for(var a=0;e>a;a++){var b=e[a];if(-1!==navigator.userAgent.indexOf(b))return!0}return!1}function f(a){for(var b=a.target,d=0;b&&4>d;){if("A"===b.tagName){a.preventDefault();var e="mounting",f="unmount";b.getAttribute("data-pageentereffect")&&(e=b.getAttribute("data-pageentereffect").trim()),b.getAttribute("data-pageleaveeffect")&&(f=b.getAttribute("data-pageleaveeffect").trim()),c.loc(b.getAttribute("href"),e,f);break}b=b.parentNode,d+=1}}function g(a){var b=document.createEvent("CustomEvent");return b.initEvent(a),b}a.capabilities={testAnimationCapability:b,isBrowserSemiSupported:d,handleClick:f,createEvent:g}}(d),function(a){a.$=function(a,b){return document.querySelectorAll(a,b)}}(a),function(a){var b=function(){var a=this,b={};a.on=function(a,c,d){if(!(arguments.length<2||"string"!=typeof a||"function"!=typeof c)){var e=c.toString();"undefined"!=typeof b[a]?"boolean"==typeof d?b[a].callbacks[e].once=d:b[a].callbacks[e]={cb:c,once:!!d}:(b[a]={callbacks:{}},b[a].callbacks[e]={cb:c,once:!!d})}},a.once=function(b,c){a.on(b,c,!0)},a.off=function(a,c){if("string"==typeof a&&"undefined"!=typeof b[a])if("function"==typeof c){var d=c.toString(),e=b[a].callbacks[d];"undefined"!=typeof e&&delete b[a].callbacks[d]}else delete b[a]},a.trigger=function(c,d){if("string"==typeof c&&"undefined"!=typeof b[c])for(var e in b[c].callbacks){var f=b[c].callbacks[e];"function"==typeof f.cb&&f.cb(d),"boolean"==typeof f.once&&f.once===!0&&a.off(c,f.cb)}}};a.PB=b,a.Dispatcher=new b}(d),function(a){function b(){this._successCallbacks=[],this._errorCallbacks=[]}function c(a,b,c,d){c.push(function(){var c=a.apply(b,arguments);c&&"function"==typeof c.then&&c.then(d.done,d)})}b.prototype.then=function(a,d){var e;return this._isdone?e=a.apply(d,this.result):(e=new b,c(a,d,this._successCallbacks,e)),e},b.prototype["catch"]=function(a,d){var e;return this._isdone&&this._isfailure?e=a.apply(d,this.result):(e=new b,c(a,d,this._errorCallbacks,e)),e},b.prototype.resolve=function(){this.result=arguments,this._isdone=!0,this._issuccess=!0;for(var a=0;a<this._successCallbacks.length;a++)this._successCallbacks[a].apply(null,arguments);this._successCallbacks=[]},b.prototype.reject=function(){this.result=arguments,this._isdone=!0,this._isfailure=!0;for(var a=0;a<this._errorCallbacks.length;a++)this._errorCallbacks[a].apply(null,arguments);this._errorCallbacks=[]};var d={Promise:b};a.promise=d}(d),function(b){function c(a){var b="";if("string"==typeof a)b=a;else{var c=encodeURIComponent;for(var d in a)a.hasOwnProperty(d)&&(b+="&"+c(d)+"="+c(a[d]))}return b}function d(){var b;if(a.XMLHttpRequest)b=new XMLHttpRequest;else if(a.ActiveXObject)try{b=new ActiveXObject("Msxml2.XMLHTTP")}catch(c){b=new ActiveXObject("Microsoft.XMLHTTP")}return b}function e(a,e,f,h){function i(){j.abort(),l.reject(g.ETIMEOUT,"",j)}var j,k,l=new b.promise.Promise;f=f||{},h=h||{};try{j=d()}catch(m){return l.reject(g.ENOXHR),l}k=c(f),"GET"===a&&k&&(e+="?"+k,k=null),j.open(a,e),"POST"===a?j.setRequestHeader("Content-type","application/json"):j.setRequestHeader("Content-type","*/*");for(var n in h)h.hasOwnProperty(n)&&j.setRequestHeader(n,h[n]);var o=g.ajaxTimeout;if(o)var p=setTimeout(i,o);return j.onreadystatechange=function(){if(o&&clearTimeout(p),4===j.readyState){var a=!j.status||(j.status<200||j.status>=300)&&304!==j.status;a?l.reject(a):l.resolve(j.responseText,j)}},j.send(k),l}function f(a){return function(b,c,d){return e(a,b,c,d)}}var g={ajax:e,get:f("GET"),post:f("POST"),put:f("PUT"),del:f("DELETE"),ENOXHR:1,ETIMEOUT:2,ajaxTimeout:15e3};b.http={},b.http.ajax=g.ajax,b.http.get=g.get,b.http.post=g.post,b.http.put=g.put,b.http["delete"]=g.del}(d),function(a){function b(a,b){sessionStorage?sessionStorage[a]=b:g[a]=b}function c(a){return sessionStorage[a]||g[a]}function d(a,b){localStorage?localStorage[a]=b:h[a]=b}function e(a){return localStorage[a]||h[a]}function f(a){localStorage?localStorage.removeItem(a):delete h[a]}a.Storage={};var g=[];a.Storage.Session={set:b,get:c};var h=[];a.Storage.DS={set:d,get:e,removeData:f}}(d),function(a){var b=function(a,b){return b.prototype=new a,b};a.extender=b}(d),function(c,d){function e(a,b,c){return{url:b,state:a,component:c}}function g(){var a=location.pathname.split("#")[0];if("string"==typeof a)return a;if(a.length>0)return a[0];throw new Error("Unable to process route")}function h(a){if(!(a&&a.url&&a.component))throw new Error("Route object should contain a URL regex and a component name");"/"===a.url&&(a.url="/$"),n.routes.push(a)}function i(){if(0===arguments.length)return n.currentState;if(arguments.length>0&&"string"==typeof arguments[0]){var a=arguments[0],b=g();if(history&&history.pushState){var d=!1;for(var e in n.routes){var f=n.routes[e];if(d=!0,a.match(f.url)&&n.currentState.name!==f.state){""===n.currentState.name?history.replaceState(f,"",a):(f.prevPage=b,history.pushState(f,"",a)),c.Dispatcher.trigger("veronica:stateChange",f);var h="mounting",i="unmount";arguments[1]&&"string"==typeof arguments[1]&&(h=arguments[1]),arguments[2]&&"string"==typeof arguments[2]&&(i=arguments[2]),j(f,h,i);break}}d||(location.href=a)}else a!==b&&(location.href=a)}}function j(a,c,d){if(null!==a){var e=a.component;n.currentState;n.currentState.name=a.state,n.currentState.state=a,n.currentComponent=document.createElement(e),k(c,d),p=b.mount(e,{})}}function k(a,b){if(a=a||"mounting",b=b||"unmount",n.viewTag)if(n.pageTag.children.length>0){var e=document.createElement("div"),g=!1;if(e.className="page "+n.currentComponent.tagName.toLowerCase(),e.appendChild(n.currentComponent),n.pageTag.addEventListener("webkitTransitionEnd",function(){l(this,e),g=!0,n.currentComponent.dispatchEvent(c.capabilities.createEvent("shown"))}),n.pageTag.addEventListener("oTransitionEnd",function(){l(this,e),g=!0,n.currentComponent.dispatchEvent(c.capabilities.createEvent("shown"))}),n.pageTag.addEventListener("transitionend",function(){l(this,e),g=!0,n.currentComponent.dispatchEvent(c.capabilities.createEvent("shown"))}),setTimeout(function(){g||(l(n.pageTag,e),n.currentComponent.dispatchEvent(c.capabilities.createEvent("shown")))},d.settings.maxPageTransitionTime),"A"===f.BROWSER_SUPPORT)e.classList.add(a),n.pageTag.classList.add(b),n.viewTag.appendChild(e);else{var h=n.currentComponent.tagName.toLowerCase(),i="<div class='page "+h+"'><"+h+"></"+h+"></div>";n.pageTag.innerHTML=i}}else n.pageTag.classList.add(n.currentComponent.tagName.toLowerCase()),n.pageTag.appendChild(n.currentComponent)}function l(a,b){a.className="hidden",a.remove(),o.length>0&&o[0].unmount(),o=p,b.className="page "+n.currentComponent.tagName.toLowerCase(),n.pageTag=b,c.Dispatcher.trigger("veronica:stateTransitionComplete",n.currentState.state)}function m(){return history.state?history.state.prevPage||null:null}var n={};n.viewTag=$(d.settings.viewTag)[0],n.viewTag?(n.viewTag.innerHTML="<div class='page'></div>",n.pageTag=n.viewTag.querySelector(".page")):n.pageTag=null,n.routes=[],n.currentState={name:"",state:{}},n.currentComponent=null;var o=[],p=[];a.onpopstate=function(a){a&&a.state&&(n.currentState.state.state!==a.state.state&&c.Dispatcher.trigger("veronica:stateChange",a.state),j(a.state,"mounting-pop","unmount-pop"))},d.createRoute=e,d.getCurrentPath=g,d.getPrevPageUrl=m,d.addRoute=h,d.loc=i,c.totalRouteLength=function(){return n.routes.length}}(d,c),function(a,b,c,e){function f(){this.Dispatcher={trigger:c.trigger},this.Ajax=b,this.Promise=e}var g={};d.flux.Actions={},d.flux.Actions.createAction=function(a){try{return g[a.name]=d.extender(f,a),!0}catch(b){return!1}},d.flux.Actions.getAction=function(a){var b=g[a];return b?new b:null}}(c,d.http,d.Dispatcher,d.promise),function(a,b,c){function e(){var a=new c;this.Dispatcher={register:b.on,unregister:b.off,once:b.once},this.Storage=d.Storage,this.subscribe=a.on,this.unsubscribe=a.off,this.emit=function(b){a.trigger(b,{})}}var f={};d.flux.Stores={},d.flux.Stores.createStore=function(a){try{var b=d.extender(e,a);return f[a.name]=new b,!0}catch(c){return!1}},d.flux.Stores.getStore=function(a){return f[a]}}(c,d.Dispatcher,d.PB),function(a,c){function d(){a.capabilities.testAnimationCapability()||$("body")[0].classList.add("noanim"),a.capabilities.isBrowserSemiSupported()&&(f.BROWSER_SUPPORT="B",$("body")[0].classList.add("noanim")),b.mount("*",{}),a.totalRouteLength()>0&&(c.loc(location.pathname),a.Dispatcher.trigger("veronica:init")),document.addEventListener("click",a.capabilities.handleClick)}document.onreadystatechange=function(){"interactive"==document.readyState&&d()}}(d,c),c.flux=d.flux,a.veronica=c}(window,riot);